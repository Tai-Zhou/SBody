cmake_minimum_required(VERSION 3.12)
project(SBody VERSION 0.0.5.220320)
add_compile_definitions(VERSION="${PROJECT_VERSION}")
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_FLAGS_DEBUG "-g -Wall")
set(CMAKE_CXX_FLAGS_RELEASE "-O3 ${OpenMP_CXX_FLAGS}")
set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)
set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib)
find_library(CFITSIO cfitsio REQUIRED)
find_package(GSL REQUIRED)
find_package(OpenMP REQUIRED)
include_directories(SYSTEM ${PROJECT_SOURCE_DIR}/include indicators/include)
aux_source_directory(${PROJECT_SOURCE_DIR}/src DIR_SRC)
add_library(SBodyLibShared SHARED ${DIR_SRC})
set_target_properties(SBodyLibShared PROPERTIES OUTPUT_NAME "SBody")
target_link_libraries(SBodyLibShared ${CFITSIO} GSL::gsl OpenMP::OpenMP_CXX)
add_library(SBodyLibStatic STATIC ${DIR_SRC})
set_target_properties(SBodyLibStatic PROPERTIES OUTPUT_NAME "SBody")
add_executable(${PROJECT_NAME} SBody.cpp)
target_link_libraries(${PROJECT_NAME} SBodyLibStatic ${CFITSIO} GSL::gsl OpenMP::OpenMP_CXX)
